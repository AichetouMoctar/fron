@if (showLayout) {
  <header class="app-header">
    <div class="header-inner">
      <a routerLink="/home" class="logo">
        <span class="logo-mark">W</span>
        <span class="logo-text">WIJHA</span>
      </a>

      <nav class="nav-desktop">
        @for (item of navItems; track item.path) {
          <a [routerLink]="item.path"
             routerLinkActive="active"
             class="nav-item">
            {{ item.label }}
          </a>
        }
      </nav>

      <div class="header-user">
        <div class="user-pill">
          <div class="avatar">{{ authService.getCurrentUser()?.nom?.charAt(0) || 'U' }}</div>
          <span class="user-name">{{ authService.getCurrentUser()?.nom }}</span>
        </div>
        <button class="btn-logout" (click)="openLogoutModal()" title="Déconnexion">
          <i class="fas fa-arrow-right-from-bracket"></i>
        </button>
      </div>
    </div>
  </header>
}

<main [class.with-layout]="showLayout">
  <router-outlet />
</main>

@if (showLayout) {
  <nav class="nav-mobile">
    @for (item of navItems; track item.path) {
      <a [routerLink]="item.path"
         routerLinkActive="active"
         class="nav-mobile-item">
        <span class="mobile-dot" routerLinkActive="dot-active"></span>
        {{ item.label }}
      </a>
    }
  </nav>
}

<!-- Modal de confirmation logout -->
@if (showLogoutModal) {
  <div class="modal-overlay" (click)="closeLogoutModal()">
    <div class="modal-card" (click)="$event.stopPropagation()">
      <div class="modal-icon">
        <i class="fas fa-arrow-right-from-bracket"></i>
      </div>
      <h3>Se déconnecter ?</h3>
      <p>Vous allez être redirigé vers la page de connexion.</p>
      <div class="modal-actions">
        <button class="btn-cancel" (click)="closeLogoutModal()">Annuler</button>
        <button class="btn-confirm" (click)="confirmLogout()">Déconnexion</button>
      </div>
    </div>
  </div>
}